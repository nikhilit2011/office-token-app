<div class="container">
  <h2 class="text-center mb-4">Live Token Display (In Progress)</h2>

  <table class="table table-bordered table-striped text-center">
    <thead class="table-dark">
      <tr>
        <th>Sr. No.</th>
        <th>Token No.</th>
        <th>Applicant Name</th>
        <th>Vehicle Number</th>
        <th>Counter</th>
      </tr>
    </thead>
    <tbody id="live-token-body">
      <%= render partial: "token_rows", locals: { tokens: @tokens } %>
    </tbody>
  </table>
</div>

<script>
  function refreshTokens() {
    fetch('/tokens/refresh_in_progress')
      .then(response => response.text())
      .then(html => {
        document.getElementById("live-token-body").innerHTML = html;
      });
  }

  setInterval(refreshTokens, 5000); // refresh every 5 seconds
</script>

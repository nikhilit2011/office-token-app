<div class="container">
  <h2 class="mb-4 text-center">Counter Dashboard â€“ <%= current_user.assigned_counter %></h2>

  <table class="table table-bordered table-striped">
    <thead class="table-light">
      <tr>
        <th>Token #</th>
        <th>Applicant</th>
        <th>Vehicle</th>
        <th>Status</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="counter-dashboard-body">
      <%= render partial: "tokens/dashboard_rows", locals: { tokens: @tokens } %>
    </tbody>
  </table>
</div>

<script>
  function refreshCounterDashboard() {
    fetch("/tokens/refresh_counter_dashboard")
      .then(response => response.text())
      .then(html => {
        document.getElementById("counter-dashboard-body").innerHTML = html;
      });
  }

  setInterval(refreshCounterDashboard, 5000); // every 5 seconds
</script>
